---
	const API_KEY = import.meta.env.VITE_WEATHER_API_KEY;
	const city = "Edinburgh,UK";
---
<div class="bg-white rounded-xl border border-indigo-100 p-4">
	<h3 class="font-semibold text-indigo-700 mb-3 flex items-center gap-2">
	  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
		<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
	  </svg>
	  Clima en Edimburgo
	</h3>
	
	<div id="weather-data" class="text-center">
	  <div class="flex justify-center items-center gap-4">
		<div class="text-4xl" id="weather-temp">--°</div>
		<div>
		  <div id="weather-condition" class="font-medium text-indigo-600">Cargando...</div>
		  <div id="weather-humidity" class="text-xs text-gray-500">Humedad: --%</div>
		</div>
	  </div>
	</div>
  </div>

  <script is:inline define:vars={{ API_KEY, city }}>
	document.addEventListener('DOMContentLoaded', async () => {
	  try {

		// Usar el endpoint exacto que mencionan (2.5, no 3.0)
		const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${API_KEY}&lang=es`);
		
		const data = await response.json();
		
		// La estructura de respuesta es diferente al onecall
		document.getElementById('weather-temp').textContent = `${Math.round(data.main.temp)}°C`;
		document.getElementById('weather-condition').textContent = data.weather[0].description;
		document.getElementById('weather-humidity').textContent = `Humedad: ${data.main.humidity}%`;
	  } catch (error) {
		console.error('Error fetching weather:', error);
	  }
	});
	</script>